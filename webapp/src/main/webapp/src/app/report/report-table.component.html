<p-table [columns]="columns"
         [value]="reportViews"
         [autoLayout]="true"
         sortField="report.created"
         [sortOrder]="-1"
         dataKey="id"
         styleClass="table table-striped table-hover">

  <ng-template pTemplate="header"
               let-columns>
    <tr>
      <th *ngFor="let column of columns"
          [pSortableColumn]="column.sortField"
          [ngSwitch]="column.id">

        <div *ngSwitchDefault>
          {{ ('reports.column.' + column.id) | translate }}
        </div>

        <p-sortIcon [field]="column.sortField"></p-sortIcon>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body"
               let-view
               let-columns="columns">
    <tr>
      <td *ngFor="let column of columns"
          [ngSwitch]="column.id">

        <report-action *ngSwitchCase="'label-header'"
                       [report]="view.report">
        </report-action>

        <ng-container *ngSwitchCase="'report-type-header'">
          {{view.translatedReportType}}
        </ng-container>

        <ng-container *ngSwitchCase="'assessment-type-header'">
          {{view.translatedAssessmentType}}
        </ng-container>

        <ng-container *ngSwitchCase="'subject-header'">
          {{view.translatedSubjectCodes}}
        </ng-container>

        <ng-container *ngSwitchCase="'school-year-header'">
          <ng-container *ngFor="let schoolYear of view.report.schoolYears; let last = last">
            {{ schoolYear | schoolYear }}<ng-container *ngIf="!last">, </ng-container>
          </ng-container>
        </ng-container>

        <span *ngSwitchCase="'status-header'"
              class="label border-only"
              [ngClass]="view.report.statusColor">
            {{ 'reports.status.' + view.report.status | translate }}
          </span>

        <ng-container *ngSwitchCase="'created-header'">
          {{ view.report.created | date:'medium' }}
        </ng-container>

      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage" let-columns>
    <tr>
      <td [attr.colspan]="columns.length">
        {{'common.no-results' | translate}}
      </td>
    </tr>
  </ng-template>
</p-table>
