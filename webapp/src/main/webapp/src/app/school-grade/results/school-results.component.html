<div *ngIf="currentSchool" class="mb-md">
  <span class="h3 blue-dark">{{currentSchool.name}}<span *ngIf="currentGrade"> - {{currentGrade.code | gradeDisplay:'long-name'}}</span></span>
  <span class="pull-right text-right">
    <button class="btn btn-default btn-sm" (click)="exportCsv()"><i class="fa fa-bold fa-table"></i> {{'labels.export.csv' | translate}}</button>
    <span school-grade-report-download class="ml-xs"
        *ngIf="currentGrade"
        [school]="currentSchool"
        [grade]="currentGrade"
        [schoolYears]="filterOptions.schoolYears">
    </span>
  </span>
</div>

<div *ngIf="!currentSchool" class="alert alert-danger">
  {{'labels.school-grade.messages.null-school' | translate }}
</div>

<assessments [assessmentExams]="assessmentExams"
             [assessmentProvider]="assessmentProvider"
             [allowFilterBySessions]="false"
             (onExportItemsByPointsEarned)="exportItemsByPointsEarned($event)">

  <!-- School Select -->
  <div class="col-md-4">
    <label>{{'labels.school-grade.results.basic-filters.school' | translate}}</label>
    <!--TODO: type ahead? -->
    <p-dropdown [options]="availableSchools"
                [(ngModel)]="currentSchool"
                (onChange)="schoolSelectChanged()"
                [filter]="true"
                filterBy="label"
                placeholder="{{'prompt.select' | translate}}"
                filterPlaceholder="{{'labels.school-grade.school-name.prompt' | translate}}">
    </p-dropdown>
  </div>

  <!-- Current Grade -->
  <div class="col-md-2">
    <label for="current-grade">{{'labels.school-grade.results.basic-filters.current-grade' | translate}}</label>
    <select id="current-grade" class="form-control"
      title="{{ (gradesAreUnavailable ? 'labels.school-grade.messages.no-grades-available': '') | translate}}"
      [disabled]="!availableGrades || availableGrades.length == 0" [(ngModel)]="currentGrade" (change)="updateRoute('Grade')">
      <option *ngFor="let grade of availableGrades" [ngValue]="grade">{{grade.code | gradeDisplay:'long-name' }}</option>
    </select>
  </div>

  <!-- School Year -->
  <div class="col-md-2">
    <label for="school-year">{{'labels.school-grade.results.basic-filters.school-year' | translate}}</label>
    <select id="school-year" [(ngModel)]="currentSchoolYear" (change)="updateRoute('Year')" class="form-control">
      <option *ngFor="let year of filterOptions.schoolYears" [ngValue]="year">{{year | schoolYear}}</option>
    </select>
  </div>

  <!-- spacer for pushing Advanced Filters to the right -->
  <div class="col-md-2">
    <!-- can't do it in the assessments.component because it depends on how many dropdowns there are here -->
  </div>

</assessments>
