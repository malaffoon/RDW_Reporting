package org.opentestsystem.rdw.reporting.common.configuration;

import org.springframework.boot.context.properties.ConfigurationProperties;

import java.util.ArrayList;
import java.util.List;

@ConfigurationProperties(prefix = "reporting")
public class ReportingSystemSettings {

    private String analyticsTrackingId;
    private String interpretiveGuideUrl;
    private String irisVendorId;
    private int minItemDataYear;
    private boolean percentileDisplayEnabled;
    private List<String> reportLanguages = new ArrayList<>();
    private int schoolYear;
    private StateProperties state = new StateProperties();
    private boolean transferAccessEnabled;
    private String translationLocation;
    private List<String> uiLanguages = new ArrayList<>();
    private String userGuideUrl;
    private List<String> englishLearners;

    /**
     * @return the list of english student filters (must be limited to lep and/or elas)
     */
    public List<String> getEnglishLearners() {
        return englishLearners;
    }

    public void setEnglishLearners(final List<String> englishLearners) {
        this.englishLearners = englishLearners;
    }

    /**
     * @return True if {@link #getEnglishLearners()} contains lep (limited english proficiencies)
     */
    public boolean isLimitedEnglishProficienciesEnabled() {
        return englishLearners.contains("lep");
    }

    /**
     * @return True if {@link #getEnglishLearners()} contains elas (english language acquisition status)
     */
    public boolean isEnglishLanguageAcquisitionStatusEnabled() {
        return englishLearners.contains("elas");
    }

    /**
     * @return The analytics tracking id
     */
    public String getAnalyticsTrackingId() {
        return analyticsTrackingId;
    }

    public void setAnalyticsTrackingId(final String analyticsTrackingId) {
        this.analyticsTrackingId = analyticsTrackingId;
    }

    /**
     * @return The interpretive guide url
     */
    public String getInterpretiveGuideUrl() {
        return interpretiveGuideUrl;
    }

    public void setInterpretiveGuideUrl(final String interpretiveGuideUrl) {
        this.interpretiveGuideUrl = interpretiveGuideUrl;
    }

    /**
     * @return Iris vendor ID
     */
    public String getIrisVendorId() {
        return this.irisVendorId;
    }

    public void setIrisVendorId(final String irisVendorId) {
        this.irisVendorId = irisVendorId;
    }

    /**
     * @return The minimum year with item level data
     */
    public int getMinItemDataYear() {
        return minItemDataYear;
    }

    public void setMinItemDataYear(final int minItemDataYear) {
        this.minItemDataYear = minItemDataYear;
    }

    /**
     * This property controls whether or not to display the norms percentile
     * information button within the web UI.
     *
     * @return True if the UI should display norms percentile information
     */
    public boolean isPercentileDisplayEnabled() {
        return percentileDisplayEnabled;
    }

    public void setPercentileDisplayEnabled(final boolean percentileDisplayEnabled) {
        this.percentileDisplayEnabled = percentileDisplayEnabled;
    }

    /**
     * @return The available report generation languages in addition to English
     */
    public List<String> getReportLanguages() {
        return reportLanguages;
    }

    public void setReportLanguages(final List<String> reportLanguages) {
        this.reportLanguages = reportLanguages;
    }

    /**
     * @return current school year
     */
    public int getSchoolYear() {
        return schoolYear;
    }

    public void setSchoolYear(final int schoolYear) {
        this.schoolYear = schoolYear;
    }

    /**
     * @return The state configuration
     */
    public StateProperties getState() {
        return state;
    }

    public void setState(final StateProperties state) {
        this.state = state;
    }

    /**
     * True if users with access to the students' most recent schools grant access
     * to the entire student exam history.
     * NOTE: this property is respected by both 'rdw-reporting-webapp' and 'rdw-reporting-report-processor'
     *
     * @return True if transfer access is enabled
     */
    public boolean isTransferAccessEnabled() {
        return transferAccessEnabled;
    }

    public void setTransferAccessEnabled(final boolean transferAccessEnabled) {
        this.transferAccessEnabled = transferAccessEnabled;
    }

    /**
     * This is the location/prefix of translation files
     * (es.json to provide Spanish, en.json to override display values, etc)
     * (ex: 'binary-${spring.cloud.config.uri}/*&#47;*&#47;master/')
     *
     * @return The prefix for translation resources.
     */
    public String getTranslationLocation() {
        return translationLocation;
    }

    public void setTranslationLocation(final String translationLocation) {
        this.translationLocation = translationLocation;
    }

    /**
     * @return The available webapp UI languages in addition to English ("en")
     */
    public List<String> getUiLanguages() {
        return uiLanguages;
    }

    public void setUiLanguages(final List<String> uiLanguages) {
        this.uiLanguages = uiLanguages;
    }

    /**
     * @return The user guide url
     */
    public String getUserGuideUrl() {
        return userGuideUrl;
    }

    public void setUserGuideUrl(final String userGuideUrl) {
        this.userGuideUrl = userGuideUrl;
    }

    public static class StateProperties {

        private String name;
        private String code;

        /**
         * @return the state code
         */
        public String getName() {
            return name;
        }

        public void setName(final String name) {
            this.name = name;
        }

        /**
         * @return the state name
         */
        public String getCode() {
            return code;
        }

        public void setCode(final String code) {
            this.code = code;
        }

    }

}
