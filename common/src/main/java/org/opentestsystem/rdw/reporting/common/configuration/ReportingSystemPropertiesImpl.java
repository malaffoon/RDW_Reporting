package org.opentestsystem.rdw.reporting.common.configuration;

import com.fasterxml.jackson.annotation.JsonAlias;
import com.fasterxml.jackson.annotation.JsonFormat;
import com.google.common.base.Objects;
import org.opentestsystem.rdw.reporting.common.model.SearchFieldPermissionLevel;
import org.opentestsystem.rdw.reporting.common.model.StudentFieldType;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * POJO for reading/writing reporting system properties
 * <p>
 * The JsonAlias annotations make it so it will read properties using rules
 * that mimic Spring's relaxed binding.
 * </p>
 */
public class ReportingSystemPropertiesImpl implements ReportingSystemProperties {

    private String analyticsTrackingId;
    private String interpretiveGuideUrl;
    private String accessDeniedUrl;
    private String landingPageUrl;
    private String irisVendorId;
    private Integer minItemDataYear;
    private Boolean percentileDisplayEnabled;
    @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)
    private List<String> reportLanguages = new ArrayList<>();
    private Integer schoolYear;
    private StateProperties state = new StateProperties();
    private Boolean transferAccessEnabled;
    private String translationLocation;
    @JsonFormat(with = JsonFormat.Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY)
    private List<String> uiLanguages = new ArrayList<>();
    private String userGuideUrl;
    private TargetReportProperties targetReport = new TargetReportProperties();
    private Map<StudentFieldType, SearchFieldPermissionLevel> studentFields = new HashMap<>();

    public ReportingSystemPropertiesImpl() {
    }

    @Override
    public String getAnalyticsTrackingId() {
        return analyticsTrackingId;
    }

    @JsonAlias({"analytics-tracking-id", "analytics_tracking_id"})
    public void setAnalyticsTrackingId(String analyticsTrackingId) {
        this.analyticsTrackingId = analyticsTrackingId;
    }

    @Override
    public String getInterpretiveGuideUrl() {
        return interpretiveGuideUrl;
    }

    @JsonAlias({"interpretive-guide-url", "interpretive_guide_url"})
    public void setInterpretiveGuideUrl(String interpretiveGuideUrl) {
        this.interpretiveGuideUrl = interpretiveGuideUrl;
    }

    @Override
    public String getAccessDeniedUrl() {
        return accessDeniedUrl;
    }

    @JsonAlias({"access-denied-url", "access_denied_url"})
    public void setAccessDeniedUrl(String accessDeniedUrl) {
        this.accessDeniedUrl = accessDeniedUrl;
    }

    @Override
    public String getLandingPageUrl() {
        return landingPageUrl;
    }

    @JsonAlias({"landing-page-url", "landing_page_url"})
    public void setLandingPageUrl(String landingPageUrl) {
        this.landingPageUrl = landingPageUrl;
    }

    @Override
    public String getIrisVendorId() {
        return irisVendorId;
    }

    @JsonAlias({"iris-vendor-id", "iris_vendor_id"})
    public void setIrisVendorId(String irisVendorId) {
        this.irisVendorId = irisVendorId;
    }

    @Override
    public Integer getMinItemDataYear() {
        return minItemDataYear;
    }

    @JsonAlias({"min-item-data-year", "min_item_data_year"})
    public void setMinItemDataYear(Integer minItemDataYear) {
        this.minItemDataYear = minItemDataYear;
    }

    public Boolean isPercentileDisplayEnabled() {
        return percentileDisplayEnabled;
    }

    @JsonAlias({"percentile-display-enabled", "percentile_display_enabled"})
    public void setPercentileDisplayEnabled(Boolean percentileDisplayEnabled) {
        this.percentileDisplayEnabled = percentileDisplayEnabled;
    }

    @Override
    public List<String> getReportLanguages() {
        return reportLanguages;
    }

    @JsonAlias({"report-languages", "report_languages"})
    public void setReportLanguages(List<String> reportLanguages) {
        this.reportLanguages = reportLanguages;
    }

    @Override
    public Integer getSchoolYear() {
        return schoolYear;
    }

    @JsonAlias({"school-year", "school_year"})
    public void setSchoolYear(Integer schoolYear) {
        this.schoolYear = schoolYear;
    }

    @Override
    public StateProperties getState() {
        return state;
    }

    public void setState(StateProperties state) {
        this.state = state;
    }

    public Boolean isTransferAccessEnabled() {
        return transferAccessEnabled;
    }

    @JsonAlias({"transfer-access-enabled", "transfer_access_enabled"})
    public void setTransferAccessEnabled(Boolean transferAccessEnabled) {
        this.transferAccessEnabled = transferAccessEnabled;
    }

    @Override
    public String getTranslationLocation() {
        return translationLocation;
    }

    @JsonAlias({"translation-location", "translation_location"})
    public void setTranslationLocation(String translationLocation) {
        this.translationLocation = translationLocation;
    }

    @Override
    public List<String> getUiLanguages() {
        return uiLanguages;
    }

    @JsonAlias({"ui-languages", "ui_languages"})
    public void setUiLanguages(List<String> uiLanguages) {
        this.uiLanguages = uiLanguages;
    }

    @Override
    public String getUserGuideUrl() {
        return userGuideUrl;
    }

    @JsonAlias({"user-guide-url", "user_guide_url"})
    public void setUserGuideUrl(String userGuideUrl) {
        this.userGuideUrl = userGuideUrl;
    }

    @Override
    public TargetReportProperties getTargetReport() {
        return targetReport;
    }

    @JsonAlias({"target-report", "target_report"})
    public void setTargetReport(TargetReportProperties targetReport) {
        this.targetReport = targetReport;
    }

    @Override
    public Map<StudentFieldType, SearchFieldPermissionLevel> getStudentFields() {
        return studentFields;
    }

    @JsonAlias({"student-fields", "student_fields"})
    public void setStudentFields(Map<StudentFieldType, SearchFieldPermissionLevel> studentFields) {
        this.studentFields = studentFields;
    }

    @Override
    public String toString() {
        return "ReportingSystemPropertiesImpl{" +
                "analyticsTrackingId='" + analyticsTrackingId + '\'' +
                ", interpretiveGuideUrl='" + interpretiveGuideUrl + '\'' +
                ", accessDeniedUrl='" + accessDeniedUrl + '\'' +
                ", irisVendorId='" + irisVendorId + '\'' +
                ", minItemDataYear=" + minItemDataYear +
                ", percentileDisplayEnabled=" + percentileDisplayEnabled +
                ", reportLanguages=" + reportLanguages +
                ", schoolYear=" + schoolYear +
                ", state=" + state +
                ", transferAccessEnabled=" + transferAccessEnabled +
                ", translationLocation='" + translationLocation + '\'' +
                ", uiLanguages=" + uiLanguages +
                ", userGuideUrl='" + userGuideUrl + '\'' +
                ", targetReport=" + targetReport +
                ", studentFields=" + studentFields +
                '}';
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof ReportingSystemPropertiesImpl)) return false;
        ReportingSystemPropertiesImpl that = (ReportingSystemPropertiesImpl) o;
        return Objects.equal(analyticsTrackingId, that.analyticsTrackingId) &&
                Objects.equal(interpretiveGuideUrl, that.interpretiveGuideUrl) &&
                Objects.equal(accessDeniedUrl, that.accessDeniedUrl) &&
                Objects.equal(landingPageUrl, that.landingPageUrl) &&
                Objects.equal(irisVendorId, that.irisVendorId) &&
                Objects.equal(minItemDataYear, that.minItemDataYear) &&
                Objects.equal(percentileDisplayEnabled, that.percentileDisplayEnabled) &&
                Objects.equal(reportLanguages, that.reportLanguages) &&
                Objects.equal(schoolYear, that.schoolYear) &&
                Objects.equal(state, that.state) &&
                Objects.equal(transferAccessEnabled, that.transferAccessEnabled) &&
                Objects.equal(translationLocation, that.translationLocation) &&
                Objects.equal(uiLanguages, that.uiLanguages) &&
                Objects.equal(userGuideUrl, that.userGuideUrl) &&
                Objects.equal(targetReport, that.targetReport) &&
                Objects.equal(studentFields, that.studentFields);
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(analyticsTrackingId, interpretiveGuideUrl, accessDeniedUrl, landingPageUrl, irisVendorId, minItemDataYear, percentileDisplayEnabled, reportLanguages, schoolYear, state, transferAccessEnabled, translationLocation, uiLanguages, userGuideUrl, targetReport, studentFields);
    }
}
