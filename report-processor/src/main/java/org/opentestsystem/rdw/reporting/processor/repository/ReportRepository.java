package org.opentestsystem.rdw.reporting.processor.repository;

import org.opentestsystem.rdw.reporting.common.model.Report;

import java.util.Collection;
import java.util.List;

/**
 * Implementations of this interface are responsible for persisting Report instances.
 */
public interface ReportRepository {

    /**
     * Insert a new Report record.
     * NOTE: A new {@link Report#id} will be generated and returned in the response Report
     *
     * @param report A report record
     * @return The inserted report record
     */
    Report insert(Report report);

    /**
     * Save an updated Report record.
     * NOTE: Must have a valid {@link Report#id}
     *
     * @param report A report record
     * @return The updated report record
     */
    Report update(Report report);

    /**
     * Find reports for a user, optionally filtered by report id.
     *
     * @param user      The user
     * @param reportIds Optional report ids, empty collection returns all reports for the user
     * @return The reports
     */
    List<Report> findByUserAndIds(String user, Collection<Long> reportIds);

    /**
     * Find a report by id.
     *
     * @param reportId A report id
     * @return The Report or null
     */
    Report findById(long reportId);
}
