package org.opentestsystem.rdw.reporting.processor.repository;

import org.opentestsystem.rdw.reporting.common.security.PermissionSource;
import org.opentestsystem.rdw.reporting.processor.model.ExportExamReportRequest;

import javax.validation.constraints.NotNull;

public interface ExamRepository {

    /**
     * Execute the exam report, writing the results to the requested (relative) location
     * and returning the actual (relative) location (may be different due to behavior of
     * repository wrt archive service).
     *
     * @param permissionSource permissions to apply during exam report
     * @param query            exam report query params
     * @param uriLocation      requested (relative) location, e.g. REPORTS/USER/123/MyReport.csv
     * @return actual (relative) location, e.g. REPORTS/USER/123/MyReport.csv.part_0000
     */
    String export(@NotNull PermissionSource permissionSource, @NotNull ExportExamReportRequest query, @NotNull String uriLocation);

}
