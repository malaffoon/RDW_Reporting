package org.opentestsystem.rdw.reporting.processor.configuration;

import org.springframework.boot.context.properties.ConfigurationProperties;

/**
 * Configuration properties for generating a student PDF report.
 */
@ConfigurationProperties(prefix = "report")
public class ReportGenerationProperties {
    private int jobThreads = 1;
    private int stepThreads = 2;
    private int chunkSize = 25;
    private String temporaryStorageUri = "file:///tmp/";

    /**
     * NOTE: Increasing this above 1 is unlikely to improve performance.
     * The bottleneck is the wkhtmltopdf service.
     *
     * @return The number of jobs to run concurrently
     */
    public int getJobThreads() {
        return jobThreads;
    }

    public void setJobThreads(final int jobThreads) {
        this.jobThreads = jobThreads;
    }

    /**
     * NOTE: This value should take into account the number of wkhtmltopdf services
     * available, and the number of request processing threads each has.
     *
     * @return The number of chunk processing steps to run concurrently.
     */
    public int getStepThreads() {
        return stepThreads;
    }

    public void setStepThreads(final int stepThreads) {
        this.stepThreads = stepThreads;
    }

    /**
     * NOTE: This value should take into account the memory limits of the available
     * wkhtmltopdf services.
     *
     * @return The number of student reports to process at once
     */
    public int getChunkSize() {
        return chunkSize;
    }

    public void setChunkSize(final int chunkSize) {
        this.chunkSize = chunkSize;
    }

    /**
     * @return The root file uri for storing temporary PDF chunks.
     */
    public String getTemporaryStorageUri() {
        return temporaryStorageUri;
    }

    public void setTemporaryStorageUri(final String temporaryStorageUri) {
        this.temporaryStorageUri = temporaryStorageUri;
    }
}
